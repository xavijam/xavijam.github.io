
<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>First steps with Leaflet: CustomMarker with canvas and geolocation · xavijam</title>
    
    <meta name="description" content="Javier Álvarez Medina personal webpage. Front-end developer at Vizzuality." />
    
    <meta name="keywords" content="leaflet, maps, canvas" />
    <meta name="distribution" content="Global">
    <meta name="author" content="xavijam">
    <meta name="detail" content="xavijam personal webpage">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="DC.title" content="xavijam">
    <meta name="geo.region" content="ES-M">
    <meta name="geo.placename" content="Madrid">
    <meta name="geo.position" content="40.4166909, -3.7003454">
    <meta name="ICBM" content="40.4166909, -3.7003454">

    <meta property="og:title" content="First steps with Leaflet: CustomMarker with canvas and geolocation · xavijam"/>
    <meta property="og:description" content="Javier Álvarez Medina personal webpage. Front-end developer at Vizzuality."/> 
    <meta property="og:type" content="Personal webpage"/>
    <meta property="og:url" content="http://xavij.am" />
    
    <meta property="og:image" content="http://xavij.am/assets/img/layout/thumbnail.png"/>

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@xavijam">
    <meta name="twitter:title" content="First steps with Leaflet: CustomMarker with canvas and geolocation · xavijam">
    <meta name="twitter:description" content="Javier Álvarez Medina personal webpage. Front-end developer at Vizzuality.">
    <meta name="twitter:creator" content="@xavijam">
    <meta name="twitter:image:src" content="http://xavij.am/assets/img/layout/thumbnail.png">
    <meta name="twitter:domain" content="xavij.am">

    
    <link rel="canonical" href="http://xavij.am/blog/2011/06/11/first-steps-with-leaflet-custommarker-with-canvas-and-geolocation">
    <link href="/favicon.ico" rel="icon">
    <link href='http://fonts.googleapis.com/css?family=Lato:lighter,regular,bold&amp;subset=latin' rel='stylesheet'>
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/app-f049a252765e28a1fb5e1137abea474d.css">
    <script src="/assets/vendor/modernizr.min-6ce109ec929012c45421375d72457818.js"></script>
    <link href="/atom.xml" rel="alternate" title="xavijam" type="application/atom+xml">
  </head>
<body >
  <header>
  <h1><a href="/" class="logo"><i class="icon logo"></i>xavij.am</a></h1>
  <nav>
    <a href="/#/projects" >projects</a>
    <a href="/blog"  class="selected" >blog</a>
    <a href="/about" >about</a>
    <a href="mailto:xavijam@gmail.com">contact</a>
  </nav>
</header>
  <div id="main">
    <div id="content">
      <div>
  <article class="hentry" role="article">
    
  <header>
    
      <h2 class="entry-title">First Steps With Leaflet: CustomMarker With Canvas and Geolocation</h2>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-11T10:47:00+02:00" pubdate data-updated="true">June 11, 2011</time>
      </p>
    
  </header>


<div class="entry-content"><div class="columns">
  <div class="columns-content">
    <p>Several moths ago I wanted to create a working example using W3C geolocation and a custom marker (similar to there is in the iphone maps application) in Google Maps v3.
    But these days has appeared <a href="http://leafletjs.com/" title="Leaflet">Leaflet</a>, a new lightweight JavaScript library for making tile-based interactive maps, and I&#8217;ve decided to give it a try. My first approach has consisted of:</p>
    <ul>
      <li>A custom marker made with Canvas.</li>
      <li>Canvas animation in the marker (probably too heavy for the CPU, but it&#8217;s a test).</li>
    </ul>
    <p>Just click in the image to try it (Pss, let me to know your position :) ). If you want to download the code, it&#8217;s in <a href="https://github.com/xavijam/geolocate-point" title="GitHub">github</a>. I&#8217;ve found two things really weird related to geolocation:</p>
    <ul>
      <li>Safari (5.0.5) doesn&#8217;t return anything in geolocation, it gets an error :S.</li>
      <li>Firefox can give you more information than other browser (city, country, street, number,&#8230;), <a href="http://davidwalsh.name/dw-content/geolocation.php" title="geo">try it with your browser</a>.</li>
    </ul>
    <p>Leaflet is continually improving the library, although there are some features under developement, you can find a lot of examples to start using it.</p>
  </div>
</div>

</div>

    <footer>
      <p class="meta">
        
        
          <button class="ladda-button" data-href="/blog/2011/06/19/rendering-5000-canvas-markers-with-leaflet/" data-color="blue" data-style="expand-left" data-size="s"><span class="ladda-label">next post &raquo;</span></button>
        
      </p>
    </footer>
  </article>
</div>
    </div>
  </div>
  
  <footer>
  <h1><a href="/" class="logo"><i class="icon logo"></i>xavij.am</a></h1>
  <nav>
    <a href="/#/projects" >projects</a>
    <a href="/blog"  class="selected" >blog</a>
    <a href="/about" >about</a>
    <a href="mailto:xavijam@gmail.com">contact</a>
  </nav>
  <p class="thanks">Proudly created with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a></p>
  <p>
    <a class="twitter" href="http://twitter.com/xavijam" target="_blank">
      <i class="fa fa-twitter"></i>
      @xavijam
    </a>
  </p>
</footer>  
  <script src="/assets/app-5a023e412291d4dbee8c1c7491f93bb4.js"></script>
  <script src="/assets/main-e21b6055d45dae24b7cad5d476736519.js"></script>
  
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-6602253-10', 'xavij.am');
    ga('send', 'pageview');
  </script>

</body>
</html>